# Cell model file for Panfilov

model_arguments(small_change=False)

# States with initial conditions
states(e=0.1, g=0.1)
parameters(v_rest=-85.0,
           v_peak=35.0,
           time_constant=1.0)

# Local Python variables
a = 0.1
gs = 8.0
ga = gs
M1 = 0.07
M2 = 0.3
eps1 = 0.01

# Local compuations
E = (e-v_rest)/(v_peak-v_rest)
eps = eps1 + M1*g/(e+M2)

# Time derivatives
de_dt = -time_constant*(v_peak-v_rest)*(ga*E*(E-a)*(E-1) + E*g)

if small_change:
    dg_dt = time_constant*eps*(-g - gs*e*(E-a-1))
else:
    dg_dt = 0.25*time_constant*eps*(-g - gs*e*(E-a-1))
    
