# 

# gotran file generated by cellml2gotran from Pandit_et_al_2001_endo.cellml

parameters("Sodium current",
           g_Na = ScalarParam(0.8, unit="uS"))

states("Sodium current", "m gate",
       m = 0.004164108)

states("Sodium current", "h gate",
       h = 0.6735613)

states("Sodium current", "j gate",
       j = 0.6729362)

parameters("L_type Ca channel",
           g_Ca_L = ScalarParam(0.031, unit="uS"),
           E_Ca_L = ScalarParam(65, unit="mV"))

states("L_type Ca channel", "d gate",
       d = 0.000002171081)

states("L_type Ca channel", "f_11 gate",
       f_11 = 0.9999529)

states("L_type Ca channel", "f_12 gate",
       f_12 = 0.9999529)

states("L_type Ca channel", "Ca_inact gate",
       Ca_inact = 0.9913102)

parameters("L_type Ca channel", "Ca_inact gate",
           tau_Ca_inact = ScalarParam(0.009, unit="s"))

parameters("Ca independent transient outward K current",
           g_t = ScalarParam(0.035, unit="uS"),
           a_endo = 0.583,
           b_endo = 0.417)

states("Ca independent transient outward K current", "r gate",
       r = 0.002191519)

states("Ca independent transient outward K current", "s gate",
       s = 0.9842542)

states("Ca independent transient outward K current", "s_slow gate",
       s_slow = 0.6421196)

parameters("Steady state outward K current",
           g_ss = ScalarParam(0.007, unit="uS"))

states("Steady state outward K current", "r_ss gate",
       r_ss = 0.002907171)

states("Steady state outward K current", "s_ss gate",
       s_ss = 0.3142767)

parameters("Inward rectifier",
           g_K1 = ScalarParam(0.024, unit="uS"))

parameters("Hyperpolarisation activated current",
           g_f = ScalarParam(0.00145, unit="uS"),
           f_Na = 0.2)

states("Hyperpolarisation activated current", "y gate",
       y = 0.003578708)

parameters("Background currents",
           g_B_Na = ScalarParam(0.00008015, unit="uS"),
           g_B_Ca = ScalarParam(0.0000324, unit="uS"),
           g_B_K = ScalarParam(0.000138, unit="uS"),
           E_Ca = ScalarParam(65, unit="mV"))

parameters("Sodium potassium pump",
           i_NaK_max = ScalarParam(0.08, unit="nA"),
           K_m_K = ScalarParam(1.5, unit="mM"),
           K_m_Na = ScalarParam(10, unit="mM"))

parameters("Sarcolemmal calcium pump current",
           i_Ca_P_max = ScalarParam(0.004, unit="nA"))

parameters("Na Ca ion exchanger current",
           K_NaCa = ScalarParam(0.000009984, unit="nA*mM**-4"),
           d_NaCa = ScalarParam(0.0001, unit="mM**-4"),
           gamma_NaCa = 0.5)

states("SR Ca release channel",
       P_C1 = 0.6348229,
       P_O1 = 0.0004327548,
       P_O2 = 0.000000000606254,
       P_C2 = 0.3647471)

parameters("SR Ca release channel",
           v1 = ScalarParam(1.8e3, unit="s**-1"),
           k_a_plus = ScalarParam(12.15e12, unit="mM**-4*s**-1"),
           k_a_minus = ScalarParam(576, unit="s**-1"),
           k_b_plus = ScalarParam(4.05e9, unit="mM**-3*s**-1"),
           k_b_minus = ScalarParam(1930, unit="s**-1"),
           k_c_plus = ScalarParam(100, unit="s**-1"),
           k_c_minus = ScalarParam(0.8, unit="s**-1"),
           n = 4,
           m_SR = 3)

parameters("SERCA2a pump",
           K_fb = ScalarParam(0.000168, unit="mM"),
           K_rb = ScalarParam(3.29, unit="mM"),
           Vmaxf = ScalarParam(0.04, unit="mM*s**-1"),
           Vmaxr = ScalarParam(0.9, unit="mM*s**-1"),
           K_SR = 1,
           N_fb = 1.2,
           N_rb = 1)

states("Intracellular and SR Ca fluxes",
       HTRPNCa = ScalarParam(1.394301e-1, unit="mM"),
       LTRPNCa = ScalarParam(5.1619e-3, unit="mM"))

parameters("Intracellular and SR Ca fluxes",
           tau_tr = ScalarParam(0.0005747, unit="s"),
           tau_xfer = ScalarParam(0.0267, unit="s"),
           HTRPN_tot = ScalarParam(0.14, unit="mM"),
           LTRPN_tot = ScalarParam(0.07, unit="mM"),
           k_htrpn_plus = ScalarParam(200000, unit="mM**-1*s**-1"),
           k_htrpn_minus = ScalarParam(0.066, unit="s**-1"),
           k_ltrpn_plus = ScalarParam(40000, unit="mM**-1*s**-1"),
           k_ltrpn_minus = ScalarParam(40, unit="s**-1"))

parameters("Standard ionic concentrations",
           Na_o = ScalarParam(140, unit="mM"),
           Ca_o = ScalarParam(1.2, unit="mM"),
           K_o = ScalarParam(5.4, unit="mM"))

states("Membrane",
       V = ScalarParam(-80.50146, unit="mV"))

parameters("Membrane",
           R = ScalarParam(8314.5, unit="mJ*mole**-1*K**-1"),
           T = ScalarParam(295, unit="K"),
           F = ScalarParam(96487, unit="C*mole**-1"),
           Cm = ScalarParam(0.0001, unit="uF"),
           stim_duration = ScalarParam(5e-3, unit="s"),
           stim_amplitude = ScalarParam(-0.6, unit="nA"))

states("Intracellular ion concentrations",
       Ca_i = ScalarParam(0.00007901351, unit="mM"),
       Na_i = ScalarParam(10.73519, unit="mM"),
       K_i = ScalarParam(139.2751, unit="mM"),
       Ca_ss = ScalarParam(0.00008737212, unit="mM"),
       Ca_JSR = ScalarParam(0.06607948, unit="mM"),
       Ca_NSR = ScalarParam(0.06600742, unit="mM"))

parameters("Intracellular ion concentrations",
           V_myo = ScalarParam(9.36e-6, unit="ul"),
           V_JSR = ScalarParam(0.056e-6, unit="ul"),
           V_NSR = ScalarParam(0.504e-6, unit="ul"),
           V_SS = ScalarParam(1.2e-9, unit="ul"),
           K_mCMDN = ScalarParam(0.00238, unit="mM"),
           K_mCSQN = ScalarParam(0.8, unit="mM"),
           K_mEGTA = ScalarParam(0.00015, unit="mM"),
           CMDN_tot = ScalarParam(0.05, unit="mM"),
           CSQN_tot = ScalarParam(15, unit="mM"),
           EGTA_tot = ScalarParam(10, unit="mM"))

component("Sodium current")
g_Na_endo = 1.33*g_Na # uS
E_Na = R*T/F*log(Na_o/Na_i) # mV
i_Na = g_Na_endo*m**3*h*j*(V - E_Na) # nA

component("Sodium current", "m gate")
m_infinity = 1/(1 + exp((V + 45)/-6.5))
tau_m = 0.00136/(0.32*(V + 47.13)/(1 - exp(-0.1*(V + 47.13))) + 0.08*exp(-V/11)) # s
dm_dt = (m_infinity - m)/tau_m

component("Sodium current", "h gate")
h_infinity = 1/(1 + exp((V + 76.1)/6.07))
tau_h = Conditional(Ge(V, -40), 0.0004537*(1 + exp(-(V + 10.66)/11.1)), 0.00349/(0.135*exp(-(V + 80)/6.8) + 3.56*exp(0.079*V) + 310000*exp(0.35*V))) # s
dh_dt = (h_infinity - h)/tau_h

component("Sodium current", "j gate")
j_infinity = 1/(1 + exp((V + 76.1)/6.07))
tau_j = Conditional(Ge(V, -40), 0.01163*(1 + exp(-0.1*(V + 32)))/exp(-0.0000002535*V), 0.00349/((V + 37.78)/(1 + exp(0.311*(V + 79.23)))*(-127140*exp(0.2444*V) - 0.00003474*exp(-0.04391*V)) + 0.1212*exp(-0.01052*V)/(1 + exp(-0.1378*(V + 40.14))))) # s
dj_dt = (j_infinity - j)/tau_j

component("L_type Ca channel")
i_Ca_L = g_Ca_L*d*((0.9 + Ca_inact/10)*f_11 + (0.1 - Ca_inact/10)*f_12)*(V - E_Ca_L) # nA

component("L_type Ca channel", "d gate")
d_infinity = 1/(1 + exp((V + 15.3)/-5))
tau_d = 0.00305*exp(-0.0045*(V + 7)**2) + 0.00105*exp(-0.002*(V - 18)**2) + 0.00025 # s
dd_dt = (d_infinity - d)/tau_d

component("L_type Ca channel", "f_11 gate")
f_11_infinity = 1/(1 + exp((V + 26.7)/5.4))
tau_f_11 = 0.105*exp(-((V + 45)/12)**2) + 0.04/(1 + exp((-V + 25)/25)) + 0.015/(1 + exp((V + 75)/25)) + 0.0017 # s
df_11_dt = (f_11_infinity - f_11)/tau_f_11

component("L_type Ca channel", "f_12 gate")
f_12_infinity = 1/(1 + exp((V + 26.7)/5.4))
tau_f_12 = 0.041*exp(-((V + 47)/12)**2) + 0.08/(1 + exp((V + 55)/-5)) + 0.015/(1 + exp((V + 75)/25)) + 0.0017 # s
df_12_dt = (f_12_infinity - f_12)/tau_f_12

component("L_type Ca channel", "Ca_inact gate")
Ca_inact_infinity = 1/(1 + Ca_ss/0.01)
dCa_inact_dt = (Ca_inact_infinity - Ca_inact)/tau_Ca_inact

component("Ca independent transient outward K current")
g_t_endo = 0.4647*g_t # uS
E_K = R*T/F*log(K_o/K_i) # mV
i_t = g_t_endo*r*(a_endo*s + b_endo*s_slow)*(V - E_K) # nA

component("Ca independent transient outward K current", "r gate")
r_infinity = 1/(1 + exp((V + 10.6)/-11.42))
tau_r = 1/(45.16*exp(0.03577*(V + 50)) + 98.9*exp(-0.1*(V + 38))) # s
dr_dt = (r_infinity - r)/tau_r

component("Ca independent transient outward K current", "s gate")
s_infinity = 1/(1 + exp((V + 45.3)/6.8841))
tau_s_endo = 0.55*exp(-((V + 70)/25)**2) + 0.049 # s
ds_dt = (s_infinity - s)/tau_s_endo

component("Ca independent transient outward K current", "s_slow gate")
s_slow_infinity = 1/(1 + exp((V + 45.3)/6.8841))
tau_s_slow_endo = 3.3*exp(-(V + 70)/30*(V + 70)/30) + 0.049 # s
ds_slow_dt = (s_slow_infinity - s_slow)/tau_s_slow_endo

component("Steady state outward K current")
i_ss = g_ss*r_ss*s_ss*(V - E_K) # nA

component("Steady state outward K current", "r_ss gate")
r_ss_infinity = 1/(1 + exp((V + 11.5)/-11.82))
tau_r_ss = 10/(45.16*exp(0.03577*(V + 50)) + 98.9*exp(-0.1*(V + 38))) # s
dr_ss_dt = (r_ss_infinity - r_ss)/tau_r_ss

component("Steady state outward K current", "s_ss gate")
s_ss_infinity = 1/(1 + exp((V + 87.5)/10.3))
tau_s_ss = 2.1 # s
ds_ss_dt = (s_ss_infinity - s_ss)/tau_s_ss

component("Inward rectifier")
i_K1 = (48/(exp((V + 37)/25) + exp((V + 37)/-25)) + 10)*0.001/(1 + exp((V - (E_K + 76.77))/-17)) + g_K1*(V - (E_K + 1.73))/((1 + exp(1.613*F*(V - (E_K + 1.73))/(R*T)))*(1 + exp((K_o - 0.9988)/-0.124))) # nA

component("Hyperpolarisation activated current")
f_K = 1 - f_Na
i_f_Na = g_f*y*f_Na*(V - E_Na) # nA
i_f_K = g_f*y*f_K*(V - E_K) # nA
i_f = i_f_Na + i_f_K # nA

component("Hyperpolarisation activated current", "y gate")
y_infinity = 1/(1 + exp((V + 138.6)/10.48))
tau_y = 1/(0.11885*exp((V + 80)/28.37) + 0.5623*exp((V + 80)/-14.19)) # s
dy_dt = (y_infinity - y)/tau_y

component("Background currents")
i_B_Na = g_B_Na*(V - E_Na) # nA
i_B_Ca = g_B_Ca*(V - E_Ca) # nA
i_B_K = g_B_K*(V - E_K) # nA
i_B = i_B_Na + i_B_Ca + i_B_K # nA

component("Sodium potassium pump")
sigma = (exp(Na_o/67.3) - 1)/7
i_NaK = i_NaK_max*1/(1 + 0.1245*exp(-0.1*V*F/(R*T)) + 0.0365*sigma*exp(-V*F/(R*T)))*K_o/(K_o + K_m_K)*1/(1 + (K_m_Na/Na_i)**1.5) # nA

component("Sarcolemmal calcium pump current")
i_Ca_P = i_Ca_P_max*Ca_i/(Ca_i + 0.0004) # nA

component("Na Ca ion exchanger current")
i_NaCa = K_NaCa*(Na_i**3*Ca_o*exp(0.03743*V*gamma_NaCa) - Na_o**3*Ca_i*exp(0.03743*V*(gamma_NaCa - 1)))/(1 + d_NaCa*(Ca_i*Na_o**3 + Ca_o*Na_i**3)) # nA

component("SR Ca release channel")
dP_C1_dt = -k_a_plus*Ca_ss**n*P_C1 + k_a_minus*P_O1
dP_O1_dt = k_a_plus*Ca_ss**n*P_C1 - (k_a_minus*P_O1 + k_b_plus*Ca_ss**m_SR*P_O1 + k_c_plus*P_O1) + k_b_minus*P_O2 + k_c_minus*P_C2
dP_O2_dt = k_b_plus*Ca_ss**m_SR*P_O1 - k_b_minus*P_O2
dP_C2_dt = k_c_plus*P_O1 - k_c_minus*P_C2
J_rel = v1*(P_O1 + P_O2)*(Ca_JSR - Ca_ss) # mM*s**-1

component("SERCA2a pump")
fb = (Ca_i/K_fb)**N_fb
rb = (Ca_NSR/K_rb)**N_rb
J_up = K_SR*(Vmaxf*fb - Vmaxr*rb)/(1 + fb + rb) # mM*s**-1

component("Intracellular and SR Ca fluxes")
J_tr = (Ca_NSR - Ca_JSR)/tau_tr # mM*s**-1
J_xfer = (Ca_ss - Ca_i)/tau_xfer # mM*s**-1
J_HTRPNCa = k_htrpn_plus*Ca_i*(HTRPN_tot - HTRPNCa) - k_htrpn_minus*HTRPNCa # mM*s**-1
dHTRPNCa_dt = J_HTRPNCa
J_LTRPNCa = k_ltrpn_plus*Ca_i*(LTRPN_tot - LTRPNCa) - k_ltrpn_minus*LTRPNCa # mM*s**-1
dLTRPNCa_dt = J_LTRPNCa
J_trpn = J_HTRPNCa + J_LTRPNCa # mM*s**-1

component("Membrane")
stim_period = Conditional(And(Ge(time, 5), Le(time, 10), ), 1, 1) # s
i_Stim = Conditional(And(Ge(time - floor(time/stim_period)*stim_period, 0.02), Le(time - floor(time/stim_period)*stim_period, stim_duration + 0.02), ), stim_amplitude, 0) # nA
dV_dt = -(i_Na + i_Ca_L + i_t + i_ss + i_f + i_K1 + i_B + i_NaK + i_NaCa + i_Ca_P + i_Stim)/Cm

component("Intracellular ion concentrations")
beta_i = 1/(1 + CMDN_tot*K_mCMDN/(K_mCMDN + Ca_i)**2 + EGTA_tot*K_mEGTA/(K_mEGTA + Ca_i)**2)
beta_SS = 1/(1 + CMDN_tot*K_mCMDN/(K_mCMDN + Ca_ss)**2)
beta_JSR = 1/(1 + CSQN_tot*K_mCSQN/(K_mCSQN + Ca_JSR)**2)
dCa_i_dt = beta_i*(J_xfer - (J_up + J_trpn + (i_B_Ca - 2*i_NaCa + i_Ca_P)*1/(2*V_myo*F)))
dNa_i_dt = -(i_Na + i_B_Na + i_NaCa*3 + i_NaK*3 + i_f_Na)*1/(V_myo*F)
dK_i_dt = -(i_Stim + i_ss + i_B_K + i_t + i_K1 + i_f_K + i_NaK*-2)*1/(V_myo*F)
dCa_ss_dt = beta_SS*(J_rel*V_JSR/V_SS - J_xfer*V_myo/V_SS - i_Ca_L*1/(2*V_SS*F))
dCa_JSR_dt = beta_JSR*(J_tr - J_rel)
dCa_NSR_dt = J_up*V_myo/V_NSR - J_tr*V_JSR/V_NSR

