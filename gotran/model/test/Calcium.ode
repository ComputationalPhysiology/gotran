# Saved Gotran model

parameters(T=ScalarParam(310),
           R=ScalarParam(8314.472),
           F=ScalarParam(96485.3415),
           V_c=ScalarParam(0.016404),
           E_Ca=ScalarParam(123.021414146),
           Cm=ScalarParam(0.185),
           i_NaCa=ScalarParam(-0.485536753407),
           V=ScalarParam(-86.2))

parameters("L type ca current",
           g_CaL=ScalarParam(0.000175))

states("L type ca current", "d gate",
       d=ScalarParam(0))

states("L type ca current", "f gate",
       f=ScalarParam(1))

states("L type ca current", "fca gate",
       fCa=ScalarParam(1))

states("Calcium dynamics",
       Ca_SR=ScalarParam(0.2),
       Ca_i=ScalarParam(0.0002),
       g=ScalarParam(1))

parameters("Calcium dynamics",
           Buf_c=ScalarParam(0.15),
           Buf_sr=ScalarParam(10),
           Ca_o=ScalarParam(2),
           K_buf_c=ScalarParam(0.001),
           K_buf_sr=ScalarParam(0.3),
           K_up=ScalarParam(0.00025),
           V_leak=ScalarParam(8e-05),
           V_sr=ScalarParam(0.001094),
           Vmax_up=ScalarParam(0.000425),
           a_rel=ScalarParam(0.016464),
           b_rel=ScalarParam(0.25),
           c_rel=ScalarParam(0.008232),
           tau_g=ScalarParam(2))

parameters("Calcium background current",
           g_bca=ScalarParam(0.000592))

parameters("Calcium pump current",
           K_pCa=ScalarParam(0.0005),
           g_pCa=ScalarParam(0.825))

component("L type ca current")
i_CaL = 4*V*g_CaL*(F*F)*(-0.341*Ca_o +\
    Ca_i*exp(2*F*V/(R*T)))*d*f*fCa/(R*T*(-1 + exp(2*F*V/(R*T))))

component("L type ca current", "d gate")
d_inf = 1.0/(1 + 0.513417119033*exp(-0.133333333333*V))
alpha_d = 0.25 + 1.4/(1 + 0.0677244716592*exp(-0.0769230769231*V))
beta_d = 1.4/(1 + exp(1 + V/5))
gamma_d = 1.0/(1 + 12.1824939607*exp(-0.05*V))
tau_d = gamma_d + alpha_d*beta_d
dd_dt = (d_inf - d)/tau_d

component("L type ca current", "f gate")
f_inf = 1.0/(1 + 17.4117080633*exp(0.142857142857*V))
tau_f = 80 + 1125*exp(-0.00416666666667*((27 + V)*(27 + V))) + 165.0/(1 +\
    exp(5/2 - V/10))
df_dt = (f_inf - f)/tau_f

component("L type ca current", "fca gate")
alpha_fCa = 1.0/(1 + 8.03402376702e+27*pow(Ca_i, 8))
beta_fCa = 0.1/(1 + 0.00673794699909*exp(10000.0*Ca_i))
gama_fCa = 0.2/(1 + 0.391605626677*exp(1250.0*Ca_i))
fCa_inf = 0.157534246575 + 0.684931506849*alpha_fCa + 0.684931506849*beta_fCa\
    + 0.684931506849*gama_fCa
tau_fCa = 2
d_fCa = (-fCa + fCa_inf)/tau_fCa
dfCa_dt = (1 - 1.0/((1 + exp(60 + V))*(1 + exp(10.0*fCa_inf -\
    10.0*fCa))))*d_fCa

component("Calcium background current")
i_b_Ca = g_bca*(V - E_Ca)

component("Calcium pump current")
i_p_Ca = g_pCa*Ca_i/(Ca_i + K_pCa)

component("Calcium dynamics")
i_rel = (c_rel + a_rel*(Ca_SR*Ca_SR)/((b_rel*b_rel) + (Ca_SR*Ca_SR)))*d*g
i_up = Vmax_up/(1 + (K_up*K_up)/(Ca_i*Ca_i))
i_leak = V_leak*(Ca_SR - Ca_i)
g_inf = (1 - 1/(1 + 0.0301973834223*exp(10000.0*Ca_i)))/(1 +\
    1.9720198874e+55*pow(Ca_i, 16)) + 1/((1 +\
    0.0301973834223*exp(10000.0*Ca_i))*(1 + 5.43991024148e+20*pow(Ca_i, 6)))
d_g = (g_inf - g)/tau_g
Ca_i_bufc = 1.0/(1 + Buf_c*K_buf_c/((Ca_i + K_buf_c)*(Ca_i + K_buf_c)))
Ca_sr_bufsr = 1.0/(1 + Buf_sr*K_buf_sr/((Ca_SR + K_buf_sr)*(Ca_SR + K_buf_sr)))
dg_dt = (1 - 1.0/((1 + exp(60 + V))*(1 + exp(-10.0*g + 10.0*g_inf))))*d_g
dCa_i_dt = (-Cm*(i_p_Ca + i_b_Ca - 2*i_NaCa + i_CaL)/(2*F*V_c) + i_leak -\
    i_up + i_rel)*Ca_i_bufc
dCa_SR_dt = V_c*(-i_leak + i_up - i_rel)*Ca_sr_bufsr/V_sr
